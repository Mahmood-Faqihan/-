<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>تهاني رمضان</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">

  <style>
    body{font-family:Cairo,system-ui;margin:0;background:#0f0f0f;color:#fff;text-align:center}
    .container{max-width:980px;margin:0 auto;padding:22px;text-align:center}
    h1,h2{margin:0 0 14px}
    .muted{color:#cfcfcf;font-size:14px;margin-top:6px}
    .btn{padding:12px 16px;border:0;border-radius:12px;cursor:pointer;font-family:inherit}
    .btn-primary{background:#2b8a3e;color:#fff}
    .btn-ghost{background:#1a1a1a;color:#fff;border:1px solid #2a2a2a}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
    .card{background:#121212;border:1px solid #2a2a2a;border-radius:16px;overflow:hidden;cursor:pointer}
    .card img{width:100%;display:block}
    .card .cap{padding:10px;text-align:center}
    input{padding:12px 14px;border-radius:12px;border:1px solid #2a2a2a;background:#121212;color:#fff;font-size:16px;width:min(420px,100%);text-align:center}
    canvas{width:100%;max-width:760px;border-radius:16px;border:1px solid #2a2a2a;background:#000;margin-bottom:36px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center}
    .hide{display:none}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;position:relative}
    .topbar h1{position:absolute;left:50%;transform:translateX(-50%);margin:0}
    .topbar #backBtn{position:relative;z-index:2}
    #openGalleryBtn{display:block;margin:18px auto 0}
    .bottom-bar{display:flex;justify-content:center;gap:12px;margin:36px 0;padding:12px 0;align-items:center}
    .bottom-bar.hidden{display:none}
    .bottom-bar .btn{min-width:120px}
    .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:1200}
    .modal-overlay.hidden{display:none}
    .modal-content{position:relative;padding:14px;border-radius:12px}
    .modal-content img{display:block;max-width:92vw;max-height:82vh;border-radius:12px}
    .modal-content #modalClose{position:absolute;right:8px;top:8px}
    #modalClose{background:transparent;border:0;color:#ff4d4d;font-size:20px;line-height:1;border-radius:50%;padding:6px;cursor:pointer}
    #modalClose:hover{background:rgba(255,77,77,0.06)}
    /* admin stats modal */
    #adminModal .modal-content{max-width:520px;color:#000;background:#fff}
    #adminModal .modal-content h3{margin:0 0 10px;color:#111}
    #adminList{white-space:pre-wrap;text-align:left;color:#111;font-size:14px}
    #adminModal #adminClose{position:absolute;right:8px;top:8px;background:transparent;border:0;font-size:18px;color:#ff4d4d}
  </style>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <h1> تهاني رمضان </h1>
      <button id="backBtn" class="btn btn-ghost hide">رجوع</button>
    </div>

    <section id="screenStart">
      <h2>اختر تصميم</h2>
      <p class="muted">اضغط على "اختيار التصميم" لعرض التصاميم.</p>
      <button id="openGalleryBtn" class="btn btn-primary">اختيار التصميم</button>
    </section>

    <section id="screenGallery" class="hide">
      <h2>اختر أحد التصاميم</h2>
      <p class="muted">اضغط على أي تصميم للمتابعة.</p>
      <div id="templatesGrid" class="grid"></div>
    </section>

    <section id="screenEditor" class="hide">
      <h2>أدخل اسمك</h2>
      <div class="row">
        <input id="nameInput" placeholder="مثال: محمود" maxlength="30">
        <button id="previewBtn" class="btn btn-ghost">عرض التصميم</button>
        <button id="downloadBtn" class="btn btn-primary">تنزيل</button>
      </div>
      <p class="muted">سيظهر الاسم على التصميم تلقائيًا.</p>
      <canvas id="canvas"></canvas>
      
    </section>
  </div>
  <div id="bottomBar" class="bottom-bar hidden"></div>

  <div id="previewModal" class="modal-overlay hidden" role="dialog" aria-hidden="true">
    <div class="modal-content">
      <button id="modalClose" class="btn btn-ghost">✕</button>
      <img id="modalImage" src="" alt="معاينة التصميم">
    </div>
  </div>
  
  <!-- admin stats modal (hidden, shown only after admin password) -->
  <div id="adminModal" class="modal-overlay hidden" role="dialog" aria-hidden="true">
    <div class="modal-content">
      <button id="adminClose">✕</button>
      <h3>إحصاءات التنزيل (محلي)</h3>
      <div id="adminList">Loading…</div>
    </div>
  </div>
  

  <script src="templates.js"></script>
  <script src="app.js"></script>
</body>
</html>
